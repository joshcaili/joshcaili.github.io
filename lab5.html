<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Registration Form</title>
    <link 
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" 
      rel="stylesheet">
    <link rel="stylesheet" href="lab5style.css"/> 
</head>
<body>
    <div class="container">
        <h2 class="mb-4 text-center">Let's get registered!</h2>
        <form id="registrationForm" onsubmit="handleSubmit(); return false;"> 
            <div class="mb-3">
                <label for="Name" class="form-label">Name</label>
                <input type="text" class="form-control" placeholder="First Name" id="firstName" required>
            </div>
            <div class="mb-3">
                <input type="text" class="form-control" placeholder="Last Name" id="lastName" required>
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Email Address</label>
                <input type="email" class="form-control" id="email" required>
            </div>
            <div class="mb-3">
                <label for="password" class="form-label">Password (! or ? required)</label>
                <input type="password" class="form-control" id="password" required>
            </div>
            <div class="mb-3">
                <label for="dob" class="form-label">Date of Birth</label>
                <input type="date" class="form-control" id="dob" required>
            </div>
            <button type="submit" class="btn btn-primary">Register</button>
        </form>
        <!-- Empty but filled later for showing success or failure after submission -->
        <div id="result" class="result"></div>
    </div>

    <script>
        // declaration similar to Cpp class to store variables
        function UserConstructor(firstName, lastName, email, password, dob) {
            this.firstName = firstName;
            this.lastName = lastName;
            this.email = email;
            this.password = password;
            this.dob = dob;
        }

        function handleSubmit() {
            // After pressing submit, read in the input in the HTML elements.
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            const dob = document.getElementById('dob').value;

            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = ''; // Clear previous results

            // Validate fields
            if (!firstName || !lastName || !email || !password || !dob) {
                resultDiv.innerHTML = '<div class="alert alert-danger">All fields are required!</div>';
                return;
            }

            // Check password must have special character (! or ?) else return
            if (!password.includes("!") && !password.includes("?")) {
                resultDiv.innerHTML = '<div class="alert alert-danger">Password must contain at least one ! or ?</div>';
                return;
            }

            // Create user object to store the form contents
            const user = new UserConstructor(firstName, lastName, email, password, dob);

            // Replace password with asterisks
            const maskedPassword = '*'.repeat(user.password.length);

            // Show success message with DOM instead of alerting
            resultDiv.innerHTML = `
                <ul class="list-group">
                    <li class="list-group-item"><strong>First Name:</strong> ${user.firstName}</li>
                    <li class="list-group-item"><strong>Last Name:</strong> ${user.lastName}</li>
                    <li class="list-group-item"><strong>Email:</strong> ${user.email}</li>
                    <li class="list-group-item"><strong>Password:</strong> ${maskedPassword}</li>
                    <li class="list-group-item"><strong>Date of Birth:</strong> ${user.dob}</li>
                </ul>
            `;
        };
    </script>
</body>
</html>
